== Stack Template

We show first an https://developer.apple.com/library/prerelease/content/documentation/LanguagesUtilities/Conceptual/ATV_Template_Guide/StackTemplate.html[Apple TVML Stack Template]
with the Grails Quickcasts:

image::stackTemplate.png[]

Create a http://docs.grails.org/latest/guide/theWebLayer.html#controllers[Grails Controller] to handle requests

include::common-quoteController.adoc[]

[source,bash]
----
./grailsw create-controller com.ociweb.quickcasts.Quickcast

----

A request to _http://localhost:8080/quickcast_ executes the _index_ action of _QuickcastController_

[source,groovy]
./grails-app/controllers/com/ociweb/quickcasts/QuickcastController.groovy
----
include::{sourceDir}/grails-app/controllers/com/ociweb/quickcasts/QuickcastController.groovy[indent=0,lines="1..4,8..11,17..18"]
----

The _QuickcastController_ index method renders every _Quickcast_ using the next http://views.grails.org/latest/#_markup_views[Markup View]

include::common-quoteMarkupViews.adoc[]

[source,groovy]
./grails-app/views/quickcast/index.gml
----
include::{sourceDir}/grails-app/views/quickcast/index.gml[indent=0]
----

Markup Views are written in Groovy, end with the file extension _gml_ and reside in the _grails-app/views_ directory.

Write a http://docs.grails.org/latest/guide/testing.html#functionalTesting[functional test] to test the XML generated is what we expect.

[source,groovy]
./src/integration-test/groovy/com/ociweb/quickcasts/QuickcastControllerIndexSpec.groovy
----
include::{sourceDir}/src/integration-test/groovy/com/ociweb/quickcasts/QuickcastControllerIndexSpec.groovy[indent=0]
----

To facilitate XML comparison in the tests, we include _XMLUnit_ as a dependency.
[source,groovy]
./build.gradle
----
include::{sourceDir}/build.gradle[indent=0,lines=69]
----